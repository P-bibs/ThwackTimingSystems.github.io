---
layout: post
title: Configuring XBees to Work in Transparent Mode
date: '2018-09-12T09:39:00.000-07:00'
author: Thwack Timing Systems
tags: 
modified_time: '2018-10-02T09:15:44.028-07:00'
thumbnail: https://4.bp.blogspot.com/-IccgOe_Nd-M/W6u50wywP6I/AAAAAAAASxo/tKTAGP811iIxQP2wwd0Lb6yF1Ek8wzYdACLcBGAs/s72-c/Screen%2BShot%2B2018-09-26%2Bat%2B12.54.22%2BPM.png
blogger_id: tag:blogger.com,1999:blog-7296530259499110162.post-158287188384182144
blogger_orig_url: https://thwacktiming.blogspot.com/2018/09/configuring-xbees-to-work-in.html
---

The challenge to take on today was one that is at the center of the functionality of the timing gate: wireless communication between two remote hosts.<br /><br />An easy way to do this on small scales is with XBees, a small device made by Digi. Xbees allow simple wireless communication and can interface with a wide variety devices, making them an indispensable tool in many projects. As with the Arduino and Raspberry Pi, a further part of the convenience of using Xbees is how much documentation and support is available. For instance, interfacing an Arduino and Xbee is as simple as buying the Xbee shield pictured below to make plugging your Xbee into your Arduino a breeze.<br /><br /><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://cdn.sparkfun.com//assets/parts/9/6/9/7/12847-00.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="600" data-original-width="600" height="200" src="https://cdn.sparkfun.com//assets/parts/9/6/9/7/12847-00.jpg" width="200" /></a></div><div style="text-align: center;"><a href="https://www.sparkfun.com/products/12847" target="_blank">Arduino Xbee Shield</a><br /><br /><div style="text-align: left;">For devices other than the Arduino, the Xbee can plug into USB ports with an Xbee explorer made by Sparkfun. See image below.</div><div style="text-align: left;"><br /></div></div><div style="text-align: center;"><a href="https://cdn.sparkfun.com//assets/parts/8/1/4/0/11812-02.jpg" imageanchor="1" style="clear: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" data-original-height="600" data-original-width="600" height="200" src="https://cdn.sparkfun.com//assets/parts/8/1/4/0/11812-02.jpg" width="200" /></a><br /><a href="https://www.sparkfun.com/products/11812" target="_blank">Xbee USB Explorer</a><br /><br /><div style="text-align: left;"><h2>Configuring Xbees</h2></div><div style="text-align: left;">Xbees are highly customizable. They can work in one of two modes. In transparent mode, they simply act as a wireless serial communication (for an introduction to serial communication see <a href="https://learn.sparkfun.com/tutorials/serial-communication" target="_blank">here</a>). Whatever is sent into the TX pin of one Xbee is sent out of the RX pin of the opposite Xbee. This means transparent mode is best for communication between only two devices. Neither host devices is aware of the Xbee, it simply sees a serial interface, thus the name "transparent." The other operation mode is API mode. When Xbees are configured in API mode, they act more like hosts and routers on a traditional TCP/IP network. Packets are sent wrapped in a proprietary version of the Zigbee protocol created by Digi. This allows for far more advanced network features, such as choosing destinations for individual packets, diagnostic tests such as pings to see if hosts are operational, and more. API mode is good for networks with many hosts that each need to communicate and are not in a permanent configuration.</div><div style="text-align: left;"><br /></div><div style="text-align: left;">We ended up going with transparent mode. Transparent mode works perfect for us since once we configure the two Xbees to point at each other, they need no additional configuration. How does one configure the Xbees to begin with? Using a piece of software called <a href="https://www.digi.com/products/xbee-rf-solutions/xctu-software/xctu" target="_blank">XCTU</a>.</div><div style="text-align: left;"><br /></div><div style="text-align: left;"><h2>Using XCTU&nbsp;</h2></div><div style="text-align: left;">The first step is to get XCTU to recognize your Xbees. XCTU runs on desktop OSs so you'll need a computer and an Xbee explorer so you can plug your Xbee in via USB. When first opening the program, you'll see an interface like the one below. Click the button in the upper left with a "+" on it.</div><div style="text-align: left;"><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-IccgOe_Nd-M/W6u50wywP6I/AAAAAAAASxo/tKTAGP811iIxQP2wwd0Lb6yF1Ek8wzYdACLcBGAs/s1600/Screen%2BShot%2B2018-09-26%2Bat%2B12.54.22%2BPM.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="697" data-original-width="1025" height="217" src="https://4.bp.blogspot.com/-IccgOe_Nd-M/W6u50wywP6I/AAAAAAAASxo/tKTAGP811iIxQP2wwd0Lb6yF1Ek8wzYdACLcBGAs/s320/Screen%2BShot%2B2018-09-26%2Bat%2B12.54.22%2BPM.png" width="320" /></a></div><div class="separator" style="clear: both; text-align: center;"><br /></div><div class="separator" style="clear: both; text-align: left;">In the dialog box that appears, note the devices listed under "Select the Serial/USB port." Then, plug in your Xbee and hit "refresh list." Click on the device that appears and select "finish." A message saying "discovering radio modules connected to your machine" will appear for a period, after which you will be returned the main XCTU screen, except now your Xbee is added to the list on the left. Repeat for your second Xbee.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">From here, there is some slight configuration to ensure that your Xbees are pointed at each other, but from then on you should never need to configure your Xbees again as long as they're used for the same purpose.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Below is a list of fields that may need changing. To configure an Xbee, click on it on the left and edit values on the right.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><b>ID</b> - this value needs to be the same for both devices. Leaving it at 7FFF will work fine.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><b>DH/DL</b> - These two strings determine where the Xbee is configured to send packets. For the Xbees to work properly, each should have their DH and DL set to the SH and SL of the opposite Xbee. For an example of this, see the below screenshot.</div><div class="separator" style="clear: both; text-align: left;"><br /></div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://2.bp.blogspot.com/-qn9RF5_ERgQ/W7OW74sR95I/AAAAAAAAS7c/5P6Pbb3eVuQER9uuR4iVUT4nbLuFiOwQwCLcBGAs/s1600/XCTUConfig.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="544" data-original-width="1600" height="216" src="https://2.bp.blogspot.com/-qn9RF5_ERgQ/W7OW74sR95I/AAAAAAAAS7c/5P6Pbb3eVuQER9uuR4iVUT4nbLuFiOwQwCLcBGAs/s640/XCTUConfig.png" width="640" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">The DH of Xbee A is set to the SH of Xbee B. The same is done for DL and SL.&nbsp;</td></tr></tbody></table><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="separator" style="clear: both; text-align: left;">Testing</div><div class="separator" style="clear: both; text-align: left;"><br /></div><div class="" style="clear: both; text-align: left;">After completing this configuration, your Xbees should be ready to communicate. To test, attach them both to your computer with Xbee explorers and switch the right side of your XCTU interface to console mode. This is done by clicking the console icon in the top right. You'll now be presented with a terminal like window that represents bytes sent and received by your selected Xbee. You can switch which Xbee's terminal is viewed by clicking on a device on the left. Click the white open button for both Xbees, then start typing in the left console window. Sent characters are in blue. Switch over to the second Xbee and you'll see your message relayed. The red indicates the characters have been received, as opposed to transmitted. Congratulations, you now have fully working bidirectional, wireless communication.&nbsp;</div><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://2.bp.blogspot.com/-2byBPxghEBI/W7OYkPdibnI/AAAAAAAAS7o/Hd3pshtWxQ0-29l8aD-fzax0yVeVraGqQCLcBGAs/s1600/Screen%2BShot%2B2018-10-02%2Bat%2B12.10.37%2BPM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="695" data-original-width="1025" height="270" src="https://2.bp.blogspot.com/-2byBPxghEBI/W7OYkPdibnI/AAAAAAAAS7o/Hd3pshtWxQ0-29l8aD-fzax0yVeVraGqQCLcBGAs/s400/Screen%2BShot%2B2018-10-02%2Bat%2B12.10.37%2BPM.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">"hello world" transmitted on Xbee A</td></tr></tbody></table><table align="center" cellpadding="0" cellspacing="0" class="tr-caption-container" style="margin-left: auto; margin-right: auto; text-align: center;"><tbody><tr><td style="text-align: center;"><a href="https://3.bp.blogspot.com/-j7lCGlu7wOY/W7OZbpSg0wI/AAAAAAAAS70/3i23tIsvFKsYM97yzFr-SX5bP7GbQDIOQCLcBGAs/s1600/Screen%2BShot%2B2018-10-02%2Bat%2B12.13.09%2BPM.png" imageanchor="1" style="margin-left: auto; margin-right: auto;"><img border="0" data-original-height="697" data-original-width="1027" height="271" src="https://3.bp.blogspot.com/-j7lCGlu7wOY/W7OZbpSg0wI/AAAAAAAAS70/3i23tIsvFKsYM97yzFr-SX5bP7GbQDIOQCLcBGAs/s400/Screen%2BShot%2B2018-10-02%2Bat%2B12.13.09%2BPM.png" width="400" /></a></td></tr><tr><td class="tr-caption" style="text-align: center;">"hello world" received on Xbee B</td></tr></tbody></table></div></div>